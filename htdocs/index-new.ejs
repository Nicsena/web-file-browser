<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



        <link rel="stylesheet" href="style.css">
    </head>
    <body>
      
        <script>
    
    
     $(document).on('submit', '#browserinput', function(event){
       
       //console.log("SUMBITTED")
  
    event.preventDefault();
    
    browsetopath();
    
});

  
  function browsetopath() {
    
  
  const inputpath = document.getElementById("url").value;
    
  console.log(inputpath)
  console.log(`${document.location.protocol}//${document.location.hostname}/listing/${inputpath}`);  
  
    return document.getElementById("fileslist").src = `${document.location.protocol}//${document.location.hostname}/listing/${inputpath}`; 

}
  
</script>

 
<div class="container">
  
  <div class="title">
    
<a><h3 style="text-align: center; margin-left: 1px; margin-top: 8px; margin-right: 1em; margin-bottom: 0px; float:left; display:inline-block;">
  Express File Explorer
  </h3></a>
  
    
  <div class="path_textbox">
    
    <form id = "browserinput" onsubmit="browsetopath()">
    
        <button type="submit" style="float: right" id="submit-dream">></button>
  
    <div id="textbox" style="overflow: hidden; padding-right: .5em;">
   <input id="url" name="url" type="text" style="width: 100%;" maxlength="100" value="/" id="path_input" placeholder="Enter the path of the directory" aria-labelledby="submit-dream" required>
      
      
</div>
      
    </form>
    
    
  </div>
    
  </div>
  
  </div>
  
<div id="main_container">
  
  <div id="list">


    
    

  
  
  </div>
  
  
  <div id="file_list">
    
<iframe id="fileslist" src="/listing/" sandbox="allow-scripts allow-same-origin" height="100%" width="100%" frameBorder="0" scrolling="yes"></iframe>
  
  </div>
  
  
      </div>
  
        
  <footer style="overflow: hidden;">
  <%- include('./footer')-%>    
  </footer>
  
    
    </body>
  
  
  <script>
  
  const iframe = document.getElementById("fileslist");
    
iframe.addEventListener("load", function() {
    //console.log("Finish");
  
  
    document.getElementById("url").value = iframe.contentWindow.location.href.replace(`${document.location.origin}/listing/`, ``)

  
  
});
  
  </script>
  

</html>